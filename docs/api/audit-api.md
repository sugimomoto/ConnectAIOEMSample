# 監査API

## 監査ログ一覧取得

アカウントの監査ログを取得します。

### エンドポイント

```http
POST /log/audit/list
```

### リクエスト

**ヘッダー：**
```http
Authorization: Bearer {JWT_TOKEN}
Content-Type: application/json
```

**クエリパラメータ：**

| パラメータ | 型 | 必須 | 説明 |
|-----------|-----|------|------|
| `startTime` | string | × | UTC開始時刻（ISO 8601形式、例：2025-08-18T00:00:00Z） |
| `endTime` | string | × | UTC終了時刻（ISO 8601形式、例：2025-08-18T23:59:59Z） |

### レスポンス

**ステータス：** 200 OK

**返却形式：** `AuditSearchResult`オブジェクト

### イベント構造

各監査イベントには以下が含まれます：

| フィールド | 説明 |
|-----------|------|
| `eventType` | 操作タイプ（ユーザーログイン、PAT作成、権限作成など） |
| `timestamp` | イベント発生時刻（ISO 8601形式） |
| `userId` | アクション実行ユーザーID |
| `userName` | アクション実行ユーザー名 |
| `targetId` | 対象リソースID（クエリID、接続IDなど） |
| `targetName` | 対象リソース名 |
| `relatedId` | 関連エンティティID（該当時） |
| `relatedName` | 関連エンティティ名（該当時） |

### イベントタイプ

利用可能なイベントタイプ：

| 範囲 | カテゴリ |
|-----|---------|
| 0 | 未定義 |
| 500～502 | 認証関連 |
| 1000～1116 | リソース操作 |
| 1200～1202 | 権限関連 |
| 1220～1224 | トークン関連 |
| 1230～1231 | その他 |

---

[← トップに戻る](./README.md)
